'use strict';

var _ = require('./');

var _loadable = require('../loadable');

var _loadable2 = _interopRequireDefault(_loadable);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

describe('snap', function () {
  describe('#getState', function () {
    it('should return only loaded components', function () {
      var getComponent = jest.fn(function () {
        return Promise.resolve().then(function () {
          return require('../__fixtures__/Dummy');
        });
      });
      var Loadable = (0, _loadable2.default)(getComponent);
      expect((0, _.getState)()).toEqual({ __LOADABLE_COMPONENT_IDS__: [] });
      Loadable.load();
      expect((0, _.getState)()).toEqual({ __LOADABLE_COMPONENT_IDS__: [0] });
    });
  });
});