{"version":3,"sources":["webpack:///./src/components/pages/booksForm.js","webpack:///./src/actions/booksActions.js"],"names":["BooksForm","state","images","img","props","getBooks","get","then","setState","res","data","catch","book","title","refs","value","description","price","postBooks","bookId","delete","deleteBooks","resetButton","booksList","books","map","booksArr","_id","imgList","imgArr","i","name","handleSelect","bind","Button","msg","handleSumit","resetForm","style","marginTop","onDelete","Component","mapStateToProps","mapDispatchToProps","dispatch","type","payload","post"],"mappings":"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","file":"bookForm-f84467343322c5a1b274.chunk.js","sourcesContent":["import React from 'react';\nimport { MenuItem, Col, InputGroup, DropdownButton, Image, Well, Panel, FormControl, FormGroup, ControlLabel, Button, Row } from 'react-bootstrap';\nimport {connect} from 'react-redux';\nimport {bindActionCreators} from 'redux';\nimport {findDOMNode} from 'react-dom';\n\nimport { postBooks, deleteBooks, getBooks, resetButton} from '../../actions/booksActions';\nimport axios from 'axios';\n\nclass BooksForm extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      images: [{}],\n      img:''\n    }\n  }\n  componentDidMount() {\n    this.props.getBooks();\n\n    axios.get('/api/images')\n      .then(res => {\n        this.setState({\n          images: res.data\n        })\n      })\n      .catch(err => {\n        this.setState({\n          images: 'error loading images from server'  \n        })\n      })\n  }\n  handleSumit() {\n    const book = [{\n      title: findDOMNode(this.refs.title).value,\n      description: findDOMNode(this.refs.description).value,\n      images: this.state.img,\n      price: findDOMNode(this.refs.price).value,\n    }]\n    this.props.postBooks(book);\n  }\n\n  onDelete() {\n    let bookId = findDOMNode(this.refs.delete).value;\n    this.props.deleteBooks(bookId);\n  }\n\n  handleSelect(img) {\n    this.setState({\n      img: `/images/${img}`\n    })\n  }\n\n  resetForm() {\n    //reset button\n    this.props.resetButton();\n    findDOMNode(this.refs.title).value = '';\n    findDOMNode(this.refs.description).value = '';\n    this.setState({img:''});\n    findDOMNode(this.refs.price).value = '';\n  }\n\n  render() {\n\n    const booksList = this.props.books.map(booksArr => {\n      return (\n        <option key={booksArr._id}> {booksArr._id}</option>\n      )\n    });\n\n    const imgList = this.state.images.map((imgArr,i)=> {\n      return (\n        <MenuItem \n          key={i} \n          eventKey={imgArr.name}\n          onClick={this.handleSelect.bind(this, imgArr.name)}\n        >{imgArr.name}</MenuItem>\n      )\n    })\n\n    return (\n      <Well>\n        <Row>\n          <Col xs={12} sm={6}>\n          <Panel>\n              <InputGroup>\n                <FormControl type=\"text\" ref=\"images\" val={this.state.img} />\n                <DropdownButton\n                  componentClass={InputGroup.Button}\n                  id=\"input-dropdown-addon\"\n                  title=\"Select an image\"\n                  bsStyle=\"primary\"\n                >\n                  {imgList}\n                </DropdownButton>\n              </InputGroup> \n              <Image src={this.state.img || null} responsive/>\n            </Panel>\n          </Col>\n          <Col xs={12} sm={6}>\n            <Panel>\n              <FormGroup controlId=\"title\">\n                <ControlLabel>Title</ControlLabel>\n                <FormControl\n                  type=\"text\"\n                  placeholder=\"Enter Title\"\n                  ref=\"title\"\n                />\n              </FormGroup>\n              <FormGroup controlId=\"description\">\n                <ControlLabel>Description</ControlLabel>\n                <FormControl\n                  type=\"text\"\n                  placeholder=\"Enter Description\"\n                  ref=\"description\"\n                />\n              </FormGroup>\n              <FormGroup controlId=\"price\">\n                <ControlLabel>Price</ControlLabel>\n                <FormControl\n                  type=\"text\"\n                  placeholder=\"Enter Price\"\n                  ref=\"price\"\n                />\n              </FormGroup>\n              <Button \n                onClick={(!this.props.msg) ? (this.handleSumit.bind(this)) : (this.resetForm.bind(this))} \n                bsStyle={(!this.props.msg) ? ('primary') : (this.props.style)}\n              >\n              {(!this.props.msg)? ('Save Book'): (this.props.msg)}</Button>\n            </Panel>\n            <Panel style={{ marginTop: '25px' }}>\n              <FormGroup controlId=\"formControlsSelect\">\n                <ControlLabel>Select a book id to delete</ControlLabel>\n                <FormControl ref=\"delete\" componentClass=\"select\" placeholder=\"select\">\n                  <option value=\"select\">select</option>\n                  {booksList}\n                </FormControl>\n              </FormGroup>\n              <Button onClick={this.onDelete.bind(this)} bsStyle=\"danger\">DELETE</Button>\n            </Panel>\n          </Col>\n        </Row>  \n      </Well>\n    )\n  }\n}\nfunction mapStateToProps(state) {\n  return {\n    books: state.books.books,\n    msg: state.books.msg,\n    style: state.books.style\n  }\n}\nfunction mapDispatchToProps(dispatch) {\n  return bindActionCreators({ \n    postBooks,\n    deleteBooks,\n    getBooks,\n    resetButton\n  },dispatch);\n}\nexport default connect(mapStateToProps, mapDispatchToProps)(BooksForm);\n\n\n// WEBPACK FOOTER //\n// ./src/components/pages/booksForm.js","import axios from 'axios';\n\nexport function getBooks() {\n  return function(dispatch) {\n    axios.get(\"/api/books\")\n      .then(res => {\n        dispatch({ type: \"GET_BOOKS\", payload: res.data })\n      })\n      .catch(err =>{\n        dispatch({ type: \"GET_BOOK_REJECTED\", payload: \"there was error geting a new book\" })\n      });\n  }\n  // return {\n  //   type: \"GET_BOOK\"\n  // }\n}\n\nexport function postBooks(book) {\n  return function(dispatch) {\n    axios.post(\"/api/books\",book)\n      .then(res => {\n        dispatch({ type: \"POST_BOOK\", payload: res.data})\n      })\n      .catch(err => {\n        dispatch({type:\"POST_BOOK_REJECTED\",payload: \"there was error posting a new book\"})\n      });\n  }\n  // return {\n  //   type: \"POST_BOOK\",\n  //   payload: _id\n  // }\n}\n\nexport function deleteBooks(book) {\n  return function (dispatch) {\n    axios.delete(`/api/books/${book}`)\n      .then(res => {\n        dispatch({ type: \"DELETE_BOOK\", payload: book })\n      })\n      .catch(err => {\n        dispatch({ type: \"POST_BOOK_REJECTED\", payload: \"there was error deleting a new book\" })\n      });\n  }\n  // return {\n  //   type: \"DELETE_BOOK\",\n  //   payload: book\n  // }\n}\n\nexport function resetButton() {\n  return {\n    type: \"RESET_BOOK\",\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/actions/booksActions.js"],"sourceRoot":""}